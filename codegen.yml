overwrite: true
schema: ./modules/**/*.gql
hooks:
  afterAllFileWrite:
    - prettier --write
generates:
  modules/balancer-subgraph/generated/balancer-subgraph-types.ts:
    schema: ${BALANCER_SUBGRAPH}
    documents: 'modules/balancer-subgraph/balancer-subgraph-queries.graphql'
    plugins:
      - typescript
      - typescript-operations
      - typescript-graphql-request
    config:
      scalars:
        BigInt: string
        Bytes: string
        BigDecimal: string
  modules/balancer-subgraph/generated/balancer-subgraph-schema.graphql:
    schema: ${BALANCER_SUBGRAPH}
    plugins:
      - schema-ast
  modules/masterchef-subgraph/generated/masterchef-subgraph-types.ts:
    schema: ${MASTERCHEF_SUBGRAPH}
    documents: 'modules/masterchef-subgraph/masterchef-subgraph-queries.graphql'
    plugins:
      - typescript
      - typescript-operations
      - typescript-graphql-request
    config:
      scalars:
        BigInt: string
        Bytes: string
        BigDecimal: string
  modules/masterchef-subgraph/generated/masterchef-subgraph-schema.graphql:
    schema: ${MASTERCHEF_SUBGRAPH}
    plugins:
      - schema-ast
  modules/blocks-subgraph/generated/blocks-subgraph-types.ts:
    schema: ${BLOCKS_SUBGRAPH}
    documents: 'modules/blocks-subgraph/block-subgraph-queries.graphql'
    plugins:
      - typescript
      - typescript-operations
      - typescript-graphql-request
    config:
      scalars:
        BigInt: string
        Bytes: string
        BigDecimal: string
  modules/blocks-subgraph/generated/blocks-subgraph-schema.graphql:
    schema: ${BLOCKS_SUBGRAPH}
    plugins:
      - schema-ast

  graphql_schema_generated.ts:
    plugins:
      - add: "import { gql } from 'apollo-server-express';"
      - add: "export const generatedGraphQlSchema = gql`"
      - add: "#\n# THIS FILE IS AUTOGENERATED — DO NOT EDIT IT\n#"
      - schema-ast
      - add:
          placement: 'append'
          content: '`;'
  schema.ts:
    plugins:
      - add: "/*\n * THIS FILE IS AUTOGENERATED — DO NOT EDIT IT\n */"
      - typescript
      - typescript-resolvers
    config:
      declarationKind: interface
      immutableTypes: false
      useIndexSignature: true
      enumsAsTypes: true
      contextType: ./app/Context#Context
      #defaultMapper: Partial<{T}> #uncomment this to handle partial query resolution easier
      scalars:
        #    Binary: Buffer
        #    Cursor: string
        #    Datetime: Date
        UUID: string
